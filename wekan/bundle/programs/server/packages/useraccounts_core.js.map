{"version":3,"sources":["meteor://ðŸ’»app/packages/useraccounts:core/lib/field.js","meteor://ðŸ’»app/packages/useraccounts:core/lib/core.js","meteor://ðŸ’»app/packages/useraccounts:core/lib/server.js","meteor://ðŸ’»app/packages/useraccounts:core/lib/methods.js","meteor://ðŸ’»app/packages/useraccounts:core/lib/server_methods.js","meteor://ðŸ’»app/packages/useraccounts:core/lib/T9n.js"],"names":["Field","field","check","FIELD_PAT","_","defaults","validating","ReactiveVar","status","Meteor","isClient","prototype","clearStatus","set","isServer","fixValue","value","type","trim","lowercase","toLowerCase","uppercase","toUpperCase","transform","getDisplayName","state","displayName","isFunction","isObject","capitalize","_id","getPlaceholder","placeholder","getStatus","get","getValue","templateInstance","$","val","hasError","negativeValidation","hasIcon","showValidating","isValidating","negativeFeedback","positiveFeedback","hasSuccess","positiveValidation","iconClass","AccountsTemplates","texts","inputIcons","setError","err","Match","OneOf","String","undefined","Boolean","setSuccess","setValidating","setValue","prop","validate","strict","isUndefined","required","requiredField","valueLength","length","minLength","minRequiredLength","maxLength","maxAllowedLength","re","match","errStr","func","result","STATE_PAT","changePwd","Optional","enrollAccount","forgotPwd","resetPwd","signIn","signUp","verifyEmail","resendVerificationEmail","ERRORS_PAT","accountsCreationDisabled","cannotRemoveService","captchaVerification","loginForbidden","mustBeLoggedIn","pwdMismatch","validationErrors","verifyEmailFirst","INFO_PAT","emailSent","emailVerified","pwdChanged","pwdReset","pwdSet","signUpVerifyEmail","verificationEmailSent","INPUT_ICONS_PAT","ObjWithStringValues","Where","x","Object","each","values","TEXTS_PAT","button","errors","info","navSignIn","navSignOut","optionalField","pwdLink_link","pwdLink_pre","pwdLink_suff","resendVerificationEmailLink_pre","resendVerificationEmailLink_link","resendVerificationEmailLink_suff","sep","signInLink_link","signInLink_pre","signInLink_suff","signUpLink_link","signUpLink_pre","signUpLink_suff","socialAdd","socialConfigure","socialIcons","socialRemove","socialSignIn","socialSignUp","socialWith","termsAnd","termsPreamble","termsPrivacy","termsTerms","title","CONFIG_PAT","confirmPassword","defaultState","enablePasswordChange","enforceEmailVerification","focusFirstInput","forbidClientAccountCreation","lowercaseUsername","overrideLoginErrors","sendVerificationEmail","socialLoginStyle","defaultLayout","hideSignInLink","hideSignUpLink","showAddRemoveServices","showForgotPasswordLink","showResendVerificationEmailLink","showLabels","showPlaceholders","continuousValidation","privacyUrl","termsUrl","homeRoutePath","redirectTimeout","Number","onLogoutHook","Function","onSubmitHook","preSignUpHook","postSignUpHook","reCaptcha","data_type","secretKey","siteKey","theme","showReCaptcha","FIELD_SUB_PAT","select","text","Any","Integer","RegExp","options","template","AT","INPUT_TYPES","isCordova","SPECIAL_FIELDS","_fields","email","contains","_initialized","_isValidInputType","indexOf","addField","Error","pick","keys","pluck","push","addFields","fields","ok","e","map","configure","config","omit","simpleTexts","configureRoute","route","console","warn","hasField","fieldId","getField","filter","getFields","getFieldIds","getRoutePath","oauthServices","names","Accounts","oauth","serviceNames","loginServicesConfigured","configuredServices","loginServiceConfiguration","find","fetch","services","name","configured","showUnconfigured","_loginButtonsSession","service","sortBy","removeField","index","splice","init","_init","Package","password","username","publish","userId","users","validateLoginAttempt","attempt","error","reason","allowed","methodName","user","loginEmail","methodArguments","emails","obj","address","verified","chain","any","atSecretKey","settingsSecretKey","settings","startup","methods","ATRemoveService","serviceName","findOne","numServices","unset","update","$unset","ATCreateUserServer","allFieldIds","profile","signupInfo","clone","replace","someError","validationErr","apiResponse","HTTP","post","params","secret","response","reCaptchaResponse","remoteip","connection","clientAddress","data","success","join","isEmpty","createUser","ATResendVerificationEmail","en","module","link","default","v","T9n","require","setLanguage"],"mappings":"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","file":"/packages/useraccounts_core.js","sourcesContent":["// ---------------------------------------------------------------------------------\n// Field object\n// ---------------------------------------------------------------------------------\n\nField = function(field) {\n  check(field, FIELD_PAT);\n  _.defaults(this, field);\n\n  this.validating = new ReactiveVar(false);\n  this.status = new ReactiveVar(null);\n};\n\nif (Meteor.isClient) {\n  Field.prototype.clearStatus = function() {\n    return this.status.set(null);\n  };\n}\n\nif (Meteor.isServer) {\n  Field.prototype.clearStatus = function() {\n    // Nothing to do server-side\n    return;\n  };\n}\n\nField.prototype.fixValue = function(value) {\n  if (this.type === \"checkbox\") {\n    return !!value;\n  }\n\n  if (this.type === \"select\") {\n    // TODO: something working...\n    return value;\n  }\n\n  if (this.type === \"radio\") {\n    // TODO: something working...\n    return value;\n  }\n\n  // Possibly applies required transformations to the input value\n  if (this.trim) {\n    value = value.trim();\n  }\n\n  if (this.lowercase) {\n    value = value.toLowerCase();\n  }\n\n  if (this.uppercase) {\n    value = value.toUpperCase();\n  }\n\n  if (!!this.transform) {\n    value = this.transform(value);\n  }\n\n  return value;\n};\n\nif (Meteor.isClient) {\n  Field.prototype.getDisplayName = function(state) {\n    var displayName = this.displayName;\n\n    if (_.isFunction(displayName)) {\n      displayName = displayName();\n    } else if (_.isObject(displayName)) {\n      displayName = displayName[state] || displayName[\"default\"];\n    }\n\n    if (!displayName) {\n      displayName = capitalize(this._id);\n    }\n\n    return displayName;\n  };\n}\n\nif (Meteor.isClient) {\n  Field.prototype.getPlaceholder = function(state) {\n    var placeholder = this.placeholder;\n\n    if (_.isObject(placeholder)) {\n      placeholder = placeholder[state] || placeholder[\"default\"];\n    }\n\n    if (!placeholder) {\n      placeholder = capitalize(this._id);\n    }\n\n    return placeholder;\n  };\n}\n\nField.prototype.getStatus = function() {\n  return this.status.get();\n};\n\nif (Meteor.isClient) {\n  Field.prototype.getValue = function(templateInstance) {\n    if (this.type === \"checkbox\") {\n      return !!(templateInstance.$(\"#at-field-\" + this._id + \":checked\").val());\n    }\n\n    if (this.type === \"radio\") {\n      return templateInstance.$(\"[name=at-field-\"+ this._id + \"]:checked\").val();\n    }\n\n    return templateInstance.$(\"#at-field-\" + this._id).val();\n  };\n}\n\nif (Meteor.isClient) {\n  Field.prototype.hasError = function() {\n    return this.negativeValidation && this.status.get();\n  };\n}\n\nif (Meteor.isClient) {\n  Field.prototype.hasIcon = function() {\n    if (this.showValidating && this.isValidating()) {\n      return true;\n    }\n\n    if (this.negativeFeedback && this.hasError()) {\n      return true;\n    }\n\n    if (this.positiveFeedback && this.hasSuccess()) {\n      return true;\n    }\n  };\n}\n\nif (Meteor.isClient) {\n  Field.prototype.hasSuccess = function() {\n    return this.positiveValidation && this.status.get() === false;\n  };\n}\n\nif (Meteor.isClient)\n  Field.prototype.iconClass = function() {\n    if (this.isValidating()) {\n      return AccountsTemplates.texts.inputIcons[\"isValidating\"];\n    }\n\n    if (this.hasError()) {\n      return AccountsTemplates.texts.inputIcons[\"hasError\"];\n    }\n\n    if (this.hasSuccess()) {\n      return AccountsTemplates.texts.inputIcons[\"hasSuccess\"];\n    }\n  };\n\nif (Meteor.isClient) {\n  Field.prototype.isValidating = function() {\n    return this.validating.get();\n  };\n}\n\nif (Meteor.isClient) {\n  Field.prototype.setError = function(err) {\n    check(err, Match.OneOf(String, undefined, Boolean));\n\n    if (err === false) {\n      return this.status.set(false);\n    }\n\n    return this.status.set(err || true);\n  };\n}\n\nif (Meteor.isServer) {\n  Field.prototype.setError = function(err) {\n    // Nothing to do server-side\n    return;\n  };\n}\n\nif (Meteor.isClient) {\n  Field.prototype.setSuccess = function() {\n    return this.status.set(false);\n  };\n}\n\nif (Meteor.isServer) {\n  Field.prototype.setSuccess = function() {\n    // Nothing to do server-side\n    return;\n  };\n}\n\nif (Meteor.isClient) {\n  Field.prototype.setValidating = function(state) {\n    check(state, Boolean);\n    return this.validating.set(state);\n  };\n}\n\nif (Meteor.isServer) {\n  Field.prototype.setValidating = function(state) {\n    // Nothing to do server-side\n    return;\n  };\n}\n\nif (Meteor.isClient) {\n  Field.prototype.setValue = function(templateInstance, value) {\n    if (this.type === \"checkbox\") {\n      templateInstance.$(\"#at-field-\" + this._id).prop('checked', true);\n      return;\n    }\n\n    if (this.type === \"radio\") {\n      templateInstance.$(\"[name=at-field-\"+ this._id + \"]\").prop('checked', true);\n      return;\n    }\n\n    templateInstance.$(\"#at-field-\" + this._id).val(value);\n  };\n}\n\nField.prototype.validate = function(value, strict) {\n  check(value, Match.OneOf(undefined, String, Boolean));\n  this.setValidating(true);\n  this.clearStatus();\n\n  if (_.isUndefined(value) || value === '') {\n    if (!!strict) {\n      if (this.required) {\n        this.setError(AccountsTemplates.texts.requiredField);\n        this.setValidating(false);\n\n        return AccountsTemplates.texts.requiredField;\n      } else {\n        this.setSuccess();\n        this.setValidating(false);\n\n        return false;\n      }\n    } else {\n      this.clearStatus();\n      this.setValidating(false);\n\n      return null;\n    }\n  }\n\n  var valueLength = value.length;\n  var minLength = this.minLength;\n  if (minLength && valueLength < minLength) {\n    this.setError(AccountsTemplates.texts.minRequiredLength + \": \" + minLength);\n    this.setValidating(false);\n\n    return AccountsTemplates.texts.minRequiredLength + \": \" + minLength;\n  }\n\n  var maxLength = this.maxLength;\n  if (maxLength && valueLength > maxLength) {\n    this.setError(AccountsTemplates.texts.maxAllowedLength + \": \" + maxLength);\n    this.setValidating(false);\n\n    return AccountsTemplates.texts.maxAllowedLength + \": \" + maxLength;\n  }\n\n  if (this.re && valueLength && !value.match(this.re)) {\n    this.setError(this.errStr);\n    this.setValidating(false);\n\n    return this.errStr;\n  }\n\n  if (this.func) {\n    var result = this.func(value);\n    var err = result === true ? this.errStr || true : result;\n\n    if (_.isUndefined(result)) {\n      return err;\n    }\n\n    this.status.set(err);\n    this.setValidating(false);\n\n    return err;\n  }\n\n  this.setSuccess();\n  this.setValidating(false);\n\n  return false;\n};\n","// ---------------------------------------------------------------------------------\n// Patterns for methods\" parameters\n// ---------------------------------------------------------------------------------\n\nSTATE_PAT = {\n  changePwd: Match.Optional(String),\n  enrollAccount: Match.Optional(String),\n  forgotPwd: Match.Optional(String),\n  resetPwd: Match.Optional(String),\n  signIn: Match.Optional(String),\n  signUp: Match.Optional(String),\n  verifyEmail: Match.Optional(String),\n  resendVerificationEmail: Match.Optional(String),\n};\n\nERRORS_PAT = {\n  accountsCreationDisabled: Match.Optional(String),\n  cannotRemoveService: Match.Optional(String),\n  captchaVerification: Match.Optional(String),\n  loginForbidden: Match.Optional(String),\n  mustBeLoggedIn: Match.Optional(String),\n  pwdMismatch: Match.Optional(String),\n  validationErrors: Match.Optional(String),\n  verifyEmailFirst: Match.Optional(String),\n};\n\nINFO_PAT = {\n  emailSent: Match.Optional(String),\n  emailVerified: Match.Optional(String),\n  pwdChanged: Match.Optional(String),\n  pwdReset: Match.Optional(String),\n  pwdSet: Match.Optional(String),\n  signUpVerifyEmail: Match.Optional(String),\n  verificationEmailSent: Match.Optional(String),\n};\n\nINPUT_ICONS_PAT = {\n  hasError: Match.Optional(String),\n  hasSuccess: Match.Optional(String),\n  isValidating: Match.Optional(String),\n};\n\nObjWithStringValues = Match.Where(function (x) {\n  check(x, Object);\n  _.each(_.values(x), function(value) {\n      check(value, String);\n  });\n  return true;\n});\n\nTEXTS_PAT = {\n  button: Match.Optional(STATE_PAT),\n  errors: Match.Optional(ERRORS_PAT),\n  info: Match.Optional(INFO_PAT),\n  inputIcons: Match.Optional(INPUT_ICONS_PAT),\n  maxAllowedLength: Match.Optional(String),\n  minRequiredLength: Match.Optional(String),\n  navSignIn: Match.Optional(String),\n  navSignOut: Match.Optional(String),\n  optionalField: Match.Optional(String),\n  pwdLink_link: Match.Optional(String),\n  pwdLink_pre: Match.Optional(String),\n  pwdLink_suff: Match.Optional(String),\n  requiredField: Match.Optional(String),\n  resendVerificationEmailLink_pre: Match.Optional(String),\n  resendVerificationEmailLink_link: Match.Optional(String),\n  resendVerificationEmailLink_suff: Match.Optional(String),\n  sep: Match.Optional(String),\n  signInLink_link: Match.Optional(String),\n  signInLink_pre: Match.Optional(String),\n  signInLink_suff: Match.Optional(String),\n  signUpLink_link: Match.Optional(String),\n  signUpLink_pre: Match.Optional(String),\n  signUpLink_suff: Match.Optional(String),\n  socialAdd: Match.Optional(String),\n  socialConfigure: Match.Optional(String),\n  socialIcons: Match.Optional(ObjWithStringValues),\n  socialRemove: Match.Optional(String),\n  socialSignIn: Match.Optional(String),\n  socialSignUp: Match.Optional(String),\n  socialWith: Match.Optional(String),\n  termsAnd: Match.Optional(String),\n  termsPreamble: Match.Optional(String),\n  termsPrivacy: Match.Optional(String),\n  termsTerms: Match.Optional(String),\n  title: Match.Optional(STATE_PAT),\n};\n\n// Configuration pattern to be checked with check\nCONFIG_PAT = {\n  // Behaviour\n  confirmPassword: Match.Optional(Boolean),\n  defaultState: Match.Optional(String),\n  enablePasswordChange: Match.Optional(Boolean),\n  enforceEmailVerification: Match.Optional(Boolean),\n  focusFirstInput: Match.Optional(Boolean),\n  forbidClientAccountCreation: Match.Optional(Boolean),\n  lowercaseUsername: Match.Optional(Boolean),\n  overrideLoginErrors: Match.Optional(Boolean),\n  sendVerificationEmail: Match.Optional(Boolean),\n  socialLoginStyle: Match.Optional(Match.OneOf(\"popup\", \"redirect\")),\n\n  // Appearance\n  defaultLayout: Match.Optional(String),\n  hideSignInLink: Match.Optional(Boolean),\n  hideSignUpLink: Match.Optional(Boolean),\n  showAddRemoveServices: Match.Optional(Boolean),\n  showForgotPasswordLink: Match.Optional(Boolean),\n  showResendVerificationEmailLink: Match.Optional(Boolean),\n  showLabels: Match.Optional(Boolean),\n  showPlaceholders: Match.Optional(Boolean),\n\n  // Client-side Validation\n  continuousValidation: Match.Optional(Boolean),\n  negativeFeedback: Match.Optional(Boolean),\n  negativeValidation: Match.Optional(Boolean),\n  positiveFeedback: Match.Optional(Boolean),\n  positiveValidation: Match.Optional(Boolean),\n  showValidating: Match.Optional(Boolean),\n\n  // Privacy Policy and Terms of Use\n  privacyUrl: Match.Optional(String),\n  termsUrl: Match.Optional(String),\n\n  // Redirects\n  homeRoutePath: Match.Optional(String),\n  redirectTimeout: Match.Optional(Number),\n\n  // Hooks\n  onLogoutHook: Match.Optional(Function),\n  onSubmitHook: Match.Optional(Function),\n  preSignUpHook: Match.Optional(Function),\n  postSignUpHook: Match.Optional(Function),\n\n  texts: Match.Optional(TEXTS_PAT),\n\n  //reCaptcha config\n  reCaptcha: Match.Optional({\n    data_type: Match.Optional(Match.OneOf(\"audio\", \"image\")),\n    secretKey: Match.Optional(String),\n    siteKey: Match.Optional(String),\n    theme: Match.Optional(Match.OneOf(\"dark\", \"light\")),\n  }),\n\n  showReCaptcha: Match.Optional(Boolean),\n};\n\n\nFIELD_SUB_PAT = {\n  \"default\": Match.Optional(String),\n  changePwd: Match.Optional(String),\n  enrollAccount: Match.Optional(String),\n  forgotPwd: Match.Optional(String),\n  resetPwd: Match.Optional(String),\n  signIn: Match.Optional(String),\n  signUp: Match.Optional(String),\n};\n\n\n// Field pattern\nFIELD_PAT = {\n  _id: String,\n  type: String,\n  required: Match.Optional(Boolean),\n  displayName: Match.Optional(Match.OneOf(String, Match.Where(_.isFunction), FIELD_SUB_PAT)),\n  placeholder: Match.Optional(Match.OneOf(String, FIELD_SUB_PAT)),\n  select: Match.Optional([{text: String, value: Match.Any}]),\n  minLength: Match.Optional(Match.Integer),\n  maxLength: Match.Optional(Match.Integer),\n  re: Match.Optional(RegExp),\n  func: Match.Optional(Match.Where(_.isFunction)),\n  errStr: Match.Optional(String),\n\n  // Client-side Validation\n  continuousValidation: Match.Optional(Boolean),\n  negativeFeedback: Match.Optional(Boolean),\n  negativeValidation: Match.Optional(Boolean),\n  positiveValidation: Match.Optional(Boolean),\n  positiveFeedback: Match.Optional(Boolean),\n\n  // Transforms\n  trim: Match.Optional(Boolean),\n  lowercase: Match.Optional(Boolean),\n  uppercase: Match.Optional(Boolean),\n  transform: Match.Optional(Match.Where(_.isFunction)),\n\n  // Custom options\n  options: Match.Optional(Object),\n  template: Match.Optional(String),\n};\n\n// -----------------------------------------------------------------------------\n// AccountsTemplates object\n// -----------------------------------------------------------------------------\n\n// -------------------\n// Client/Server stuff\n// -------------------\n\n// Constructor\nAT = function() {\n\n};\n\nAT.prototype.CONFIG_PAT = CONFIG_PAT;\n\n/*\n  Each field object is represented by the following properties:\n    _id:         String   (required)  // A unique field\"s id / name\n    type:        String   (required)  // Displayed input type\n    required:    Boolean  (optional)  // Specifies Whether to fail or not when field is left empty\n    displayName: String   (optional)  // The field\"s name to be displayed as a label above the input element\n    placeholder: String   (optional)  // The placeholder text to be displayed inside the input element\n    minLength:   Integer  (optional)  // Possibly specifies the minimum allowed length\n    maxLength:   Integer  (optional)  // Possibly specifies the maximum allowed length\n    re:          RegExp   (optional)  // Regular expression for validation\n    func:        Function (optional)  // Custom function for validation\n    errStr:      String   (optional)  // Error message to be displayed in case re validation fails\n*/\n\n\n// Allowed input types\nAT.prototype.INPUT_TYPES = [\n  \"checkbox\",\n  \"email\",\n  \"hidden\",\n  \"password\",\n  \"radio\",\n  \"select\",\n  \"tel\",\n  \"text\",\n  \"url\",\n];\n\n// Current configuration values\nAT.prototype.options = {\n  // Appearance\n  //defaultLayout: undefined,\n  showAddRemoveServices: false,\n  showForgotPasswordLink: false,\n  showResendVerificationEmailLink: false,\n  showLabels: true,\n  showPlaceholders: true,\n\n  // Behaviour\n  confirmPassword: true,\n  defaultState: \"signIn\",\n  enablePasswordChange: false,\n  focusFirstInput: !Meteor.isCordova,\n  forbidClientAccountCreation: false,\n  lowercaseUsername: false,\n  overrideLoginErrors: true,\n  sendVerificationEmail: false,\n  socialLoginStyle: \"popup\",\n\n  // Client-side Validation\n  //continuousValidation: false,\n  //negativeFeedback: false,\n  //negativeValidation: false,\n  //positiveValidation: false,\n  //positiveFeedback: false,\n  //showValidating: false,\n\n  // Privacy Policy and Terms of Use\n  privacyUrl: undefined,\n  termsUrl: undefined,\n\n  // Hooks\n  onSubmitHook: undefined,\n};\n\nAT.prototype.texts = {\n  button: {\n    changePwd: \"updateYourPassword\",\n    //enrollAccount: \"createAccount\",\n    enrollAccount: \"signUp\",\n    forgotPwd: \"emailResetLink\",\n    resetPwd: \"setPassword\",\n    signIn: \"signIn\",\n    signUp: \"signUp\",\n    resendVerificationEmail: \"Send email again\",\n  },\n  errors: {\n    accountsCreationDisabled: \"Client side accounts creation is disabled!!!\",\n    cannotRemoveService: \"Cannot remove the only active service!\",\n    captchaVerification: \"Captcha verification failed!\",\n    loginForbidden: \"error.accounts.Login forbidden\",\n    mustBeLoggedIn: \"error.accounts.Must be logged in\",\n    pwdMismatch: \"error.pwdsDontMatch\",\n    validationErrors: \"Validation Errors\",\n    verifyEmailFirst: \"Please verify your email first. Check the email and follow the link!\",\n  },\n  navSignIn: 'signIn',\n  navSignOut: 'signOut',\n  info: {\n    emailSent: \"info.emailSent\",\n    emailVerified: \"info.emailVerified\",\n    pwdChanged: \"info.passwordChanged\",\n    pwdReset: \"info.passwordReset\",\n    pwdSet: \"Password Set\",\n    signUpVerifyEmail: \"Successful Registration! Please check your email and follow the instructions.\",\n    verificationEmailSent: \"A new email has been sent to you. If the email doesn't show up in your inbox, be sure to check your spam folder.\",\n  },\n  inputIcons: {\n    isValidating: \"fa fa-spinner fa-spin\",\n    hasSuccess: \"fa fa-check\",\n    hasError: \"fa fa-times\",\n  },\n  maxAllowedLength: \"Maximum allowed length\",\n  minRequiredLength: \"Minimum required length\",\n  optionalField: \"optional\",\n  pwdLink_pre: \"\",\n  pwdLink_link: \"forgotPassword\",\n  pwdLink_suff: \"\",\n  requiredField: \"Required Field\",\n  resendVerificationEmailLink_pre: \"Verification email lost?\",\n  resendVerificationEmailLink_link: \"Send again\",\n  resendVerificationEmailLink_suff: \"\",\n  sep: \"OR\",\n  signInLink_pre: \"ifYouAlreadyHaveAnAccount\",\n  signInLink_link: \"signin\",\n  signInLink_suff: \"\",\n  signUpLink_pre: \"dontHaveAnAccount\",\n  signUpLink_link: \"signUp\",\n  signUpLink_suff: \"\",\n  socialAdd: \"add\",\n  socialConfigure: \"configure\",\n  socialIcons: {\n      \"meteor-developer\": \"fa fa-rocket\"\n  },\n  socialRemove: \"remove\",\n  socialSignIn: \"signIn\",\n  socialSignUp: \"signUp\",\n  socialWith: \"with\",\n  termsPreamble: \"clickAgree\",\n  termsPrivacy: \"privacyPolicy\",\n  termsAnd: \"and\",\n  termsTerms: \"terms\",\n  title: {\n    changePwd: \"changePassword\",\n    enrollAccount: \"createAccount\",\n    forgotPwd: \"resetYourPassword\",\n    resetPwd: \"resetYourPassword\",\n    signIn: \"signIn\",\n    signUp: \"createAccount\",\n    verifyEmail: \"\",\n    resendVerificationEmail: \"Send the verification email again\",\n  },\n};\n\nAT.prototype.SPECIAL_FIELDS = [\n  \"password_again\",\n  \"username_and_email\",\n];\n\n// SignIn / SignUp fields\nAT.prototype._fields = [\n  new Field({\n    _id: \"email\",\n    type: \"email\",\n    required: true,\n    lowercase: true,\n    trim: true,\n    func: function(email) {\n        return !_.contains(email, '@');\n    },\n    errStr: 'Invalid email',\n  }),\n  new Field({\n    _id: \"password\",\n    type: \"password\",\n    required: true,\n    minLength: 6,\n    displayName: {\n        \"default\": \"password\",\n        changePwd: \"newPassword\",\n        resetPwd: \"newPassword\",\n    },\n    placeholder: {\n        \"default\": \"password\",\n        changePwd: \"newPassword\",\n        resetPwd: \"newPassword\",\n    },\n  }),\n];\n\n\nAT.prototype._initialized = false;\n\n// Input type validation\nAT.prototype._isValidInputType = function(value) {\n    return _.indexOf(this.INPUT_TYPES, value) !== -1;\n};\n\nAT.prototype.addField = function(field) {\n    // Fields can be added only before initialization\n    if (this._initialized) {\n      throw new Error(\"AccountsTemplates.addField should strictly be called before AccountsTemplates.init!\");\n    }\n\n    field = _.pick(field, _.keys(FIELD_PAT));\n    check(field, FIELD_PAT);\n    // Checks there\"s currently no field called field._id\n    if (_.indexOf(_.pluck(this._fields, \"_id\"), field._id) !== -1) {\n      throw new Error(\"A field called \" + field._id + \" already exists!\");\n    }\n    // Validates field.type\n    if (!this._isValidInputType(field.type)) {\n      throw new Error(\"field.type is not valid!\");\n    }\n    // Checks field.minLength is strictly positive\n    if (typeof field.minLength !== \"undefined\" && field.minLength <= 0) {\n      throw new Error(\"field.minLength should be greater than zero!\");\n    }\n    // Checks field.maxLength is strictly positive\n    if (typeof field.maxLength !== \"undefined\" && field.maxLength <= 0) {\n      throw new Error(\"field.maxLength should be greater than zero!\");\n    }\n    // Checks field.maxLength is greater than field.minLength\n    if (typeof field.minLength !== \"undefined\" && typeof field.minLength !== \"undefined\" && field.maxLength < field.minLength) {\n      throw new Error(\"field.maxLength should be greater than field.maxLength!\");\n    }\n\n    if (!(Meteor.isServer && _.contains(this.SPECIAL_FIELDS, field._id))) {\n      this._fields.push(new Field(field));\n    }\n\n    return this._fields;\n};\n\nAT.prototype.addFields = function(fields) {\n  var ok;\n\n  try { // don\"t bother with `typeof` - just access `length` and `catch`\n    ok = fields.length > 0 && \"0\" in Object(fields);\n  } catch (e) {\n    throw new Error(\"field argument should be an array of valid field objects!\");\n  }\n  if (ok) {\n    _.map(fields, function(field) {\n      this.addField(field);\n    }, this);\n  } else {\n    throw new Error(\"field argument should be an array of valid field objects!\");\n  }\n\n  return this._fields;\n};\n\nAT.prototype.configure = function(config) {\n  // Configuration options can be set only before initialization\n  if (this._initialized) {\n    throw new Error(\"Configuration options must be set before AccountsTemplates.init!\");\n  }\n\n  // Updates the current configuration\n  check(config, CONFIG_PAT);\n  var options = _.omit(config, \"texts\", \"reCaptcha\");\n  this.options = _.defaults(options, this.options);\n\n  // Possibly sets up reCaptcha options\n  var reCaptcha = config.reCaptcha;\n  if (reCaptcha) {\n    // Updates the current button object\n    this.options.reCaptcha = _.defaults(reCaptcha, this.options.reCaptcha || {});\n  }\n\n  // Possibly sets up texts...\n  if (config.texts) {\n    var texts = config.texts;\n    var simpleTexts = _.omit(texts, \"button\", \"errors\", \"info\", \"inputIcons\", \"socialIcons\", \"title\");\n\n    this.texts = _.defaults(simpleTexts, this.texts);\n\n    if (texts.button) {\n      // Updates the current button object\n      this.texts.button = _.defaults(texts.button, this.texts.button);\n    }\n\n    if (texts.errors) {\n      // Updates the current errors object\n      this.texts.errors = _.defaults(texts.errors, this.texts.errors);\n    }\n\n    if (texts.info) {\n      // Updates the current info object\n      this.texts.info = _.defaults(texts.info, this.texts.info);\n    }\n\n    if (texts.inputIcons) {\n      // Updates the current inputIcons object\n      this.texts.inputIcons = _.defaults(texts.inputIcons, this.texts.inputIcons);\n    }\n\n    if (texts.socialIcons) {\n      // Updates the current socialIcons object\n      this.texts.socialIcons = _.defaults(texts.socialIcons, this.texts.socialIcons);\n    }\n\n    if (texts.title) {\n      // Updates the current title object\n      this.texts.title = _.defaults(texts.title, this.texts.title);\n    }\n  }\n};\n\n\nAT.prototype.configureRoute = function(route, options) {\n  console.warn('You now need a routing package like useraccounts:iron-routing or useraccounts:flow-routing to be able to configure routes!');\n};\n\n\nAT.prototype.hasField = function(fieldId) {\n  return !!this.getField(fieldId);\n};\n\nAT.prototype.getField = function(fieldId) {\n  var field = _.filter(this._fields, function(field) {\n    return field._id === fieldId;\n  });\n\n  return (field.length === 1) ? field[0] : undefined;\n};\n\nAT.prototype.getFields = function() {\n    return this._fields;\n};\n\nAT.prototype.getFieldIds = function() {\n    return _.pluck(this._fields, \"_id\");\n};\n\nAT.prototype.getRoutePath = function(route) {\n    return \"#\";\n};\n\nAT.prototype.oauthServices = function() {\n  // Extracts names of available services\n  var names;\n\n  if (Meteor.isServer) {\n    names = (Accounts.oauth && Accounts.oauth.serviceNames()) || [];\n  } else {\n    names = (Accounts.oauth && Accounts.loginServicesConfigured() && Accounts.oauth.serviceNames()) || [];\n  }\n  // Extracts names of configured services\n  var configuredServices = [];\n\n  if (Accounts.loginServiceConfiguration) {\n    configuredServices = _.pluck(Accounts.loginServiceConfiguration.find().fetch(), \"service\");\n  }\n\n  // Builds a list of objects containing service name as _id and its configuration status\n  var services = _.map(names, function(name) {\n    return {\n      _id : name,\n      configured: _.contains(configuredServices, name),\n    };\n  });\n\n  // Checks whether there is a UI to configure services...\n  // XXX: this only works with the accounts-ui package\n  var showUnconfigured = typeof Accounts._loginButtonsSession !== \"undefined\";\n\n  // Filters out unconfigured services in case they\"re not to be displayed\n  if (!showUnconfigured) {\n    services = _.filter(services, function(service) {\n      return service.configured;\n    });\n  }\n\n  // Sorts services by name\n  services = _.sortBy(services, function(service) {\n    return service._id;\n  });\n\n  return services;\n};\n\nAT.prototype.removeField = function(fieldId) {\n  // Fields can be removed only before initialization\n  if (this._initialized) {\n    throw new Error(\"AccountsTemplates.removeField should strictly be called before AccountsTemplates.init!\");\n  }\n  // Tries to look up the field with given _id\n  var index = _.indexOf(_.pluck(this._fields, \"_id\"), fieldId);\n\n  if (index !== -1) {\n    return this._fields.splice(index, 1)[0];\n  } else if (!(Meteor.isServer && _.contains(this.SPECIAL_FIELDS, fieldId))) {\n    throw new Error(\"A field called \" + fieldId + \" does not exist!\");\n  }\n};\n","/* global\n  AT: false,\n  AccountsTemplates: false\n*/\n\"use strict\";\n\n// Initialization\nAT.prototype.init = function() {\n  console.warn(\"[AccountsTemplates] There is no more need to call AccountsTemplates.init()! Simply remove the call ;-)\");\n};\n\nAT.prototype._init = function() {\n  if (this._initialized) {\n    return;\n  }\n\n  // Checks there is at least one account service installed\n  if (!Package[\"accounts-password\"] && (!Accounts.oauth || Accounts.oauth.serviceNames().length === 0)) {\n    throw Error(\"AccountsTemplates: You must add at least one account service!\");\n  }\n\n  // A password field is strictly required\n  var password = this.getField(\"password\");\n  if (!password) {\n    throw Error(\"A password field is strictly required!\");\n  }\n\n  if (password.type !== \"password\") {\n    throw Error(\"The type of password field should be password!\");\n  }\n\n  // Then we can have \"username\" or \"email\" or even both of them\n  // but at least one of the two is strictly required\n  var username = this.getField(\"username\");\n  var email = this.getField(\"email\");\n\n  if (!username && !email) {\n    throw Error(\"At least one field out of username and email is strictly required!\");\n  }\n\n  if (username && !username.required) {\n    throw Error(\"The username field should be required!\");\n  }\n\n  if (email) {\n    if (email.type !== \"email\") {\n      throw Error(\"The type of email field should be email!\");\n    }\n\n    if (username) {\n      // username and email\n      if (username.type !== \"text\") {\n        throw Error(\"The type of username field should be text when email field is present!\");\n      }\n    } else {\n      // email only\n      if (!email.required) {\n        throw Error(\"The email field should be required when username is not present!\");\n      }\n    }\n  } else {\n    // username only\n    if (username.type !== \"text\" && username.type !== \"tel\") {\n      throw Error(\"The type of username field should be text or tel!\");\n    }\n  }\n\n  // Possibly publish more user data in order to be able to show add/remove\n  // buttons for 3rd-party services\n  if (this.options.showAddRemoveServices) {\n    // Publish additional current user info to get the list of registered services\n    // XXX TODO: use\n    // Accounts.addAutopublishFields({\n    //   forLoggedInUser: ['services.facebook'],\n    //   forOtherUsers: [],\n    // })\n    // ...adds only user.services.*.id\n    Meteor.publish(\"userRegisteredServices\", function() {\n      var userId = this.userId;\n      return Meteor.users.find(userId, {fields: {services: 1}});\n      /*\n      if (userId) {\n        var user = Meteor.users.findOne(userId);\n        var services_id = _.chain(user.services)\n          .keys()\n          .reject(function(service) {return service === \"resume\";})\n          .map(function(service) {return \"services.\" + service + \".id\";})\n          .value();\n        var projection = {};\n        _.each(services_id, function(key) {projection[key] = 1;});\n        return Meteor.users.find(userId, {fields: projection});\n      }\n      */\n    });\n  }\n\n  // Security stuff\n  if (this.options.overrideLoginErrors) {\n    Accounts.validateLoginAttempt(function(attempt) {\n      if (attempt.error) {\n        var reason = attempt.error.reason;\n        if (reason === \"User not found\" || reason === \"Incorrect password\") {\n          throw new Meteor.Error(403, AccountsTemplates.texts.errors.loginForbidden);\n        }\n      }\n      return attempt.allowed;\n    });\n  }\n\n  if (this.options.sendVerificationEmail && this.options.enforceEmailVerification) {\n    Accounts.validateLoginAttempt(function(attempt) {\n      if (!attempt.allowed) {\n        return false;\n      }\n\n      if (attempt.type !== \"password\" || attempt.methodName !== \"login\") {\n        return attempt.allowed;\n      }\n\n      var user = attempt.user;\n      if (!user) {\n        return attempt.allowed;\n      }\n\n      var ok = true;\n      var loginEmail = attempt.methodArguments[0].user.email;\n      if (loginEmail) {\n        var email = _.filter(user.emails, function(obj) {\n          return obj.address.toLowerCase() === loginEmail.toLowerCase();\n        });\n        if (!email.length || !email[0].verified) {\n          ok = false;\n        }\n      } else {\n        // we got the username, lets check there's at lease one verified email\n        var emailVerified = _.chain(user.emails)\n        .pluck('verified')\n        .any()\n        .value();\n\n        if (!emailVerified) {\n          ok = false;\n        }\n      }\n      if (!ok) {\n        throw new Meteor.Error(401, AccountsTemplates.texts.errors.verifyEmailFirst);\n      }\n\n      return attempt.allowed;\n    });\n  }\n\n  //Check that reCaptcha secret keys are available\n  if (this.options.showReCaptcha) {\n    var atSecretKey = AccountsTemplates.options.reCaptcha && AccountsTemplates.options.reCaptcha.secretKey;\n    var settingsSecretKey = Meteor.settings.reCaptcha && Meteor.settings.reCaptcha.secretKey;\n\n    if (!atSecretKey && !settingsSecretKey) {\n      throw new Meteor.Error(401, \"User Accounts: reCaptcha secret key not found! Please provide it or set showReCaptcha to false.\" );\n    }\n  }\n\n  // Marks AccountsTemplates as initialized\n  this._initialized = true;\n};\n\nAccountsTemplates = new AT();\n\n// Client side account creation is disabled by default:\n// the methos ATCreateUserServer is used instead!\n// to actually disable client side account creation use:\n//\n//    AccountsTemplates.config({\n//        forbidClientAccountCreation: true\n//    });\n\nAccounts.config({\n  forbidClientAccountCreation: true\n});\n\n// Initialization\nMeteor.startup(function() {\n  AccountsTemplates._init();\n});\n","/* global\n  AccountsTemplates: false\n*/\n\"use strict\";\n\nMeteor.methods({\n  ATRemoveService: function(serviceName) {\n    check(serviceName, String);\n\n    var userId = this.userId;\n\n    if (userId) {\n      var user = Meteor.users.findOne(userId);\n      var numServices = _.keys(user.services).length; // including \"resume\"\n      var unset = {};\n\n      if (numServices === 2) {\n        throw new Meteor.Error(403, AccountsTemplates.texts.errors.cannotRemoveService, {});\n      }\n\n      unset[\"services.\" + serviceName] = \"\";\n      Meteor.users.update(userId, {$unset: unset});\n    }\n  },\n});\n","/* global\n  AccountsTemplates\n*/\n\"use strict\";\n\nMeteor.methods({\n  ATCreateUserServer: function(options) {\n    if (AccountsTemplates.options.forbidClientAccountCreation) {\n      throw new Meteor.Error(403, AccountsTemplates.texts.errors.accountsCreationDisabled);\n    }\n\n    // createUser() does more checking.\n    check(options, Object);\n    var allFieldIds = AccountsTemplates.getFieldIds();\n\n    // Picks-up whitelisted fields for profile\n    var profile = options.profile;\n    profile = _.pick(profile, allFieldIds);\n    profile = _.omit(profile, \"username\", \"email\", \"password\");\n\n    // Validates fields\" value\n    var signupInfo = _.clone(profile);\n    if (options.username) {\n      signupInfo.username = options.username;\n\n      if (AccountsTemplates.options.lowercaseUsername) {\n        signupInfo.username = signupInfo.username.trim().replace(/\\s+/gm, ' ');\n        options.profile.name = signupInfo.username;\n        signupInfo.username = signupInfo.username.toLowerCase().replace(/\\s+/gm, '');\n        options.username = signupInfo.username;\n      }\n    }\n\n    if (options.email) {\n      signupInfo.email = options.email;\n\n      if (AccountsTemplates.options.lowercaseUsername) {\n        signupInfo.email = signupInfo.email.toLowerCase().replace(/\\s+/gm, '');\n        options.email = signupInfo.email;\n      }\n    }\n\n    if (options.password) {\n      signupInfo.password = options.password;\n    }\n\n    var validationErrors = {};\n    var someError = false;\n\n    // Validates fields values\n    _.each(AccountsTemplates.getFields(), function(field) {\n      var fieldId = field._id;\n      var value = signupInfo[fieldId];\n\n      if (fieldId === \"password\") {\n        // Can\"t Pick-up password here\n        // NOTE: at this stage the password is already encripted,\n        //       so there is no way to validate it!!!\n        check(value, Object);\n        return;\n      }\n\n      var validationErr = field.validate(value, \"strict\");\n      if (validationErr) {\n        validationErrors[fieldId] = validationErr;\n        someError = true;\n      }\n    });\n\n    if (AccountsTemplates.options.showReCaptcha) {\n      var secretKey = null;\n\n      if (AccountsTemplates.options.reCaptcha && AccountsTemplates.options.reCaptcha.secretKey) {\n        secretKey = AccountsTemplates.options.reCaptcha.secretKey;\n      } else {\n        secretKey = Meteor.settings.reCaptcha.secretKey;\n      }\n\n      var apiResponse = HTTP.post(\"https://www.google.com/recaptcha/api/siteverify\", {\n        params: {\n          secret: secretKey,\n          response: options.profile.reCaptchaResponse,\n          remoteip: this.connection.clientAddress,\n        }\n      }).data;\n\n      if (!apiResponse.success) {\n        throw new Meteor.Error(403, AccountsTemplates.texts.errors.captchaVerification,\n          apiResponse['error-codes'] ? apiResponse['error-codes'].join(\", \") : \"Unknown Error.\");\n      }\n    }\n\n    if (someError) {\n      throw new Meteor.Error(403, AccountsTemplates.texts.errors.validationErrors, validationErrors);\n    }\n\n    // Possibly removes the profile field\n    if (_.isEmpty(options.profile)) {\n      delete options.profile;\n    }\n\n    // Create user. result contains id and token.\n    var userId = Accounts.createUser(options);\n    // safety belt. createUser is supposed to throw on error. send 500 error\n    // instead of sending a verification email with empty userid.\n    if (! userId) {\n      throw new Error(\"createUser failed to insert new user\");\n    }\n\n    // Call postSignUpHook, if any...\n    var postSignUpHook = AccountsTemplates.options.postSignUpHook;\n    if (postSignUpHook) {\n      postSignUpHook(userId, options);\n    }\n\n    // Send a email address verification email in case the context permits it\n    // and the specific configuration flag was set to true\n    if (options.email && AccountsTemplates.options.sendVerificationEmail) {\n      Accounts.sendVerificationEmail(userId, options.email);\n    }\n  },\n\n  // Resend a user's verification e-mail\n  ATResendVerificationEmail: function (email) {\n    check(email, String);\n\n    var user = Meteor.users.findOne({ \"emails.address\": email });\n\n    // Send the standard error back to the client if no user exist with this e-mail\n    if (!user) {\n      throw new Meteor.Error(403, \"User not found\");\n    }\n\n    try {\n      Accounts.sendVerificationEmail(user._id);\n    } catch (error) {\n      // Handle error when email already verified\n      // https://github.com/dwinston/send-verification-email-bug\n      throw new Meteor.Error(403, \"Already verified\");\n    }\n  },\n});\n","T9n = require('meteor-accounts-t9n').T9n;\nimport en from 'meteor-accounts-t9n/build/en';\n\nT9n.map(\"en\", en);\nT9n.setLanguage('en');\n"]}