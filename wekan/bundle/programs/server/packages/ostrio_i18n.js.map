{"version":3,"sources":["meteor://ðŸ’»app/packages/ostrio:i18n/i18n.js"],"names":["module","export","default","I18N","Meteor","link","v","ReactiveVar","check","Match","ClientStorage","clientStorage","isObject","obj","Object","prototype","toString","call","toDottedString","prepend","arguments","length","undefined","final","newKey","key","concat","assign","_allowedDataTypes","proceedPlaceholders","_string","replacements","string","replacement","hash","includes","replace","RegExp","constructor","config","self","returnKey","helperName","currentLocale","helperSettingsName","Boolean","OneOf","String","i18n","locales","strings","addl10n","settings","defaultLocale","dotted","_this$settings$key","code","push","userLocale","isClient","window","navigator","userLanguage","language","Template","registerHelper","get","apply","getSetting","savedLocale","lang","isoCode","set","_len","args","Array","_key2","indexOf","slice","_replacements","_replacements$","_key","result","keys","has","_this$strings","setLocale","locale","Error","Optional","langugeSet","current","currentISO","currentName","name","all","other","l10n","k","object"],"mappings":";;;;;;;;;;;;;;;;;;;;;AAAAA,MAAM,CAACC,MAAM,CAAC;EAACC,OAAO,EAACA,CAAA,KAAIC;AAAI,CAAC,CAAC;AAAC,IAAIC,MAAM;AAACJ,MAAM,CAACK,IAAI,CAAC,eAAe,EAAC;EAACD,MAAMA,CAACE,CAAC,EAAC;IAACF,MAAM,GAACE,CAAC;EAAA;AAAC,CAAC,EAAC,CAAC,CAAC;AAAC,IAAIC,WAAW;AAACP,MAAM,CAACK,IAAI,CAAC,qBAAqB,EAAC;EAACE,WAAWA,CAACD,CAAC,EAAC;IAACC,WAAW,GAACD,CAAC;EAAA;AAAC,CAAC,EAAC,CAAC,CAAC;AAAC,IAAIE,KAAK,EAACC,KAAK;AAACT,MAAM,CAACK,IAAI,CAAC,cAAc,EAAC;EAACG,KAAKA,CAACF,CAAC,EAAC;IAACE,KAAK,GAACF,CAAC;EAAA,CAAC;EAACG,KAAKA,CAACH,CAAC,EAAC;IAACG,KAAK,GAACH,CAAC;EAAA;AAAC,CAAC,EAAC,CAAC,CAAC;AAAC,IAAII,aAAa;AAACV,MAAM,CAACK,IAAI,CAAC,wBAAwB,EAAC;EAACK,aAAaA,CAACJ,CAAC,EAAC;IAACI,aAAa,GAACJ,CAAC;EAAA;AAAC,CAAC,EAAC,CAAC,CAAC;AAKxW,MAAMK,aAAa,GAAG,IAAID,aAAa,CAAC,CAAC;AACzC,MAAME,QAAQ,GAAIC,GAAG,IAAK;EACxB,IAAI,CAACA,GAAG,EAAE;IACR,OAAO,KAAK;EACd;EAEA,OAAOC,MAAM,CAACC,SAAS,CAACC,QAAQ,CAACC,IAAI,CAACJ,GAAG,CAAC,KAAK,iBAAiB;AAClE,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA,MAAMK,cAAc,GAAG,SAAAA,CAAUL,GAAG,EAAmB;EAAA,IAAjBM,OAAO,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,KAAK;EACnD,IAAIG,KAAK,GAAG,CAAC,CAAC;EACd,IAAIC,MAAM,GAAG,EAAE;EACf,KAAK,IAAIC,GAAG,IAAIZ,GAAG,EAAE;IACnB,IAAIM,OAAO,EAAE;MACXK,MAAM,MAAAE,MAAA,CAAMP,OAAO,OAAAO,MAAA,CAAID,GAAG,CAAE;IAC9B,CAAC,MAAM;MACLD,MAAM,GAAGC,GAAG;IACd;IAEA,IAAI,OAAOZ,GAAG,CAACY,GAAG,CAAC,KAAK,UAAU,IAAI,OAAOZ,GAAG,CAACY,GAAG,CAAC,KAAK,QAAQ,EAAE;MAClEF,KAAK,CAACC,MAAM,CAAC,GAAGX,GAAG,CAACY,GAAG,CAAC;IAC1B,CAAC,MAAM;MACLF,KAAK,GAAGT,MAAM,CAACa,MAAM,CAAC,CAAC,CAAC,EAAEJ,KAAK,EAAEL,cAAc,CAACD,IAAI,CAAC,IAAI,EAAEJ,GAAG,CAACY,GAAG,CAAC,EAAED,MAAM,CAAC,CAAC;IAC/E;EACF;EACA,OAAOD,KAAK;AACd,CAAC;AAED,MAAMK,iBAAiB,GAAG,CAAC,QAAQ,EAAE,QAAQ,CAAC;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA,MAAMC,mBAAmB,GAAG,SAAAA,CAAUC,OAAO,EAAEC,YAAY,EAAE;EAC3D,IAAIC,MAAM,GAAGF,OAAO;EACpB,IAAIE,MAAM,EAAE;IACV,IAAIP,GAAG;IACP,KAAK,IAAIQ,WAAW,IAAIF,YAAY,EAAE;MACpC,IAAIE,WAAW,IAAIA,WAAW,CAACC,IAAI,IAAItB,QAAQ,CAACqB,WAAW,CAACC,IAAI,CAAC,EAAE;QACjE,KAAKT,GAAG,IAAIQ,WAAW,CAACC,IAAI,EAAE;UAC5B,IAAIN,iBAAiB,CAACO,QAAQ,CAAC,OAAOF,WAAW,CAACC,IAAI,CAACT,GAAG,CAAC,CAAC,EAAE;YAC5DO,MAAM,GAAGA,MAAM,CAACI,OAAO,CAAC,IAAIC,MAAM,WAAAX,MAAA,CAAcD,GAAG,eAAe,IAAI,CAAC,EAAEQ,WAAW,CAACC,IAAI,CAACT,GAAG,CAAC,CAAC;UACjG;QACF;MACF,CAAC,MAAM,IAAIb,QAAQ,CAACqB,WAAW,CAAC,EAAE;QAChC,KAAKR,GAAG,IAAIQ,WAAW,EAAE;UACvB,IAAIL,iBAAiB,CAACO,QAAQ,CAAC,OAAOF,WAAW,CAACR,GAAG,CAAC,CAAC,EAAE;YACvDO,MAAM,GAAGA,MAAM,CAACI,OAAO,CAAC,IAAIC,MAAM,WAAAX,MAAA,CAAcD,GAAG,eAAe,IAAI,CAAC,EAAEQ,WAAW,CAACR,GAAG,CAAC,CAAC;UAC5F;QACF;MACF,CAAC,MAAM,IAAIG,iBAAiB,CAACO,QAAQ,CAAC,OAAOF,WAAW,CAAC,EAAE;QACzDD,MAAM,GAAGA,MAAM,CAACI,OAAO,CAAC,6BAA6B,EAAEH,WAAW,CAAC;MACrE;IACF;EACF;EAEA,OAAOD,MAAM;AACf,CAAC;AAEc,MAAM7B,IAAI,CAAC;EACxB;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACEmC,WAAWA,CAAA,EAAc;IAAA,IAAbC,MAAM,GAAAnB,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,CAAC,CAAC;IACrBZ,KAAK,CAAC+B,MAAM,EAAEzB,MAAM,CAAC;IAErB,IAAIW,GAAG;IACP,MAAMe,IAAI,GAAG,IAAI;IACjB,IAAI,CAACC,SAAS,GAAGF,MAAM,CAACE,SAAS,IAAI,IAAI;IACzC,IAAI,CAACC,UAAU,GAAGH,MAAM,CAACG,UAAU,KAAK,IAAI,GACtC,IAAI,GACJH,MAAM,CAACG,UAAU,IAAI,MAAM;IACjC,IAAI,CAACC,aAAa,GAAG,IAAIpC,WAAW,CAAC,KAAK,CAAC,CAAC;IAC5C,IAAI,CAACqC,kBAAkB,GAAGL,MAAM,CAACK,kBAAkB,KAAK,IAAI,GACxD,IAAI,GACJL,MAAM,CAACK,kBAAkB,IAAI,cAAc;IAE/CpC,KAAK,CAAC,IAAI,CAACiC,SAAS,EAAEI,OAAO,CAAC;IAC9BrC,KAAK,CAAC,IAAI,CAACkC,UAAU,EAAEjC,KAAK,CAACqC,KAAK,CAACC,MAAM,EAAE,IAAI,CAAC,CAAC;IACjDvC,KAAK,CAAC,IAAI,CAACoC,kBAAkB,EAAEnC,KAAK,CAACqC,KAAK,CAACC,MAAM,EAAE,IAAI,CAAC,CAAC;IACzDvC,KAAK,CAAC+B,MAAM,CAACS,IAAI,EAAElC,MAAM,CAAC;IAE1B,IAAI,CAACmC,OAAO,GAAG,EAAE;IACjB,IAAI,CAACC,OAAO,GAAG,CAAC,CAAC;IAEjB,IAAI,CAACC,OAAO,CAACZ,MAAM,CAACS,IAAI,CAAC;IAEzB,IAAIpC,QAAQ,CAAC2B,MAAM,CAACS,IAAI,CAAC,EAAE;MACzBxC,KAAK,CAAC+B,MAAM,CAACS,IAAI,CAACI,QAAQ,EAAEtC,MAAM,CAAC;MACnC,IAAI,CAACsC,QAAQ,GAAGb,MAAM,CAACS,IAAI,CAACI,QAAQ;MACpC,IAAI,CAACC,aAAa,GAAG,IAAI,CAACD,QAAQ,CAACC,aAAa;MAChD7C,KAAK,CAAC,IAAI,CAAC6C,aAAa,EAAEN,MAAM,CAAC;MACjC,IAAI,CAACG,OAAO,CAAC,wBAAwB,CAAC,GAAG,EAAE;MAC3C,IAAI,CAACA,OAAO,CAAC,2BAA2B,CAAC,GAAG,EAAE;MAC9C,MAAMI,MAAM,GAAGpC,cAAc,CAACD,IAAI,CAAC,IAAI,EAAE,IAAI,CAACmC,QAAQ,EAAE,YAAY,CAAC;MAErE,KAAK3B,GAAG,IAAI6B,MAAM,EAAE;QAClB,IAAI,OAAOA,MAAM,CAAC7B,GAAG,CAAC,KAAK,QAAQ,EAAE;UACnC,IAAI,CAACyB,OAAO,CAACzB,GAAG,CAAC,GAAG6B,MAAM,CAAC7B,GAAG,CAAC;QACjC;MACF;MAEA,KAAKA,GAAG,IAAI,IAAI,CAAC2B,QAAQ,EAAE;QAAA,IAAAG,kBAAA;QACzB,KAAAA,kBAAA,GAAI,IAAI,CAACH,QAAQ,CAAC3B,GAAG,CAAC,cAAA8B,kBAAA,eAAlBA,kBAAA,CAAoBC,IAAI,EAAE;UAC5B,IAAI,CAACP,OAAO,CAACQ,IAAI,CAAChC,GAAG,CAAC;UACtB,IAAI,CAACyB,OAAO,CAAC,wBAAwB,CAAC,CAACO,IAAI,CAAC,IAAI,CAACL,QAAQ,CAAC3B,GAAG,CAAC,CAAC+B,IAAI,CAAC;UACpE,IAAI,CAACN,OAAO,CAAC,2BAA2B,CAAC,CAACO,IAAI,CAAC,IAAI,CAACL,QAAQ,CAAC3B,GAAG,CAAC,CAAC;QACpE;MACF;IACF;IAEA,IAAI,CAACiC,UAAU,GAAKtD,MAAM,CAACuD,QAAQ,GAAIC,MAAM,CAACC,SAAS,CAACC,YAAY,IAAIF,MAAM,CAACC,SAAS,CAACE,QAAQ,IAAIF,SAAS,CAACC,YAAY,GAAG,IAAI,CAACV,QAAQ,CAACC,aAAc;IAE1J,IAAIjD,MAAM,CAACuD,QAAQ,EAAE;MACnB,IAAI,OAAOK,QAAQ,KAAK,WAAW,IAAIA,QAAQ,KAAK,IAAI,EAAE;QACxD,IAAI,IAAI,CAACtB,UAAU,KAAK,IAAI,EAAE;UAC5B;AACV;AACA;UACUsB,QAAQ,CAACC,cAAc,CAAC,IAAI,CAACvB,UAAU,EAAE,YAAY;YACnD,OAAOF,IAAI,CAAC0B,GAAG,CAACC,KAAK,CAAC3B,IAAI,EAAEpB,SAAS,CAAC;UACxC,CAAC,CAAC;QACJ;QAEA,IAAI,IAAI,CAACwB,kBAAkB,KAAK,IAAI,EAAE;UACpC;AACV;AACA;UACUoB,QAAQ,CAACC,cAAc,CAAC,IAAI,CAACrB,kBAAkB,EAAE,YAAY;YAC3D,OAAOJ,IAAI,CAAC4B,UAAU,CAACD,KAAK,CAAC3B,IAAI,EAAEpB,SAAS,CAAC;UAC/C,CAAC,CAAC;QACJ;MACF;MAEA,MAAMiD,WAAW,GAAG1D,aAAa,CAACuD,GAAG,CAAC,mBAAmB,CAAC;MAC1D,IAAI,CAAC,IAAI,CAACvB,aAAa,CAACuB,GAAG,CAAC,CAAC,EAAE;QAC7B,IAAI,CAACG,WAAW,EAAE;UAChB,KAAK,IAAIC,IAAI,IAAI,IAAI,CAACpB,OAAO,CAAC,2BAA2B,CAAC,EAAE;YAC1D,IAAIoB,IAAI,CAACd,IAAI,KAAK,IAAI,CAACE,UAAU,IAAIY,IAAI,CAACC,OAAO,KAAK,IAAI,CAACb,UAAU,EAAE;cACrE,IAAI,CAACf,aAAa,CAAC6B,GAAG,CAACF,IAAI,CAACd,IAAI,CAAC;cACjC7C,aAAa,CAAC6D,GAAG,CAAC,mBAAmB,EAAEF,IAAI,CAACd,IAAI,CAAC;cACjD;YACF;UACF;QACF,CAAC,MAAM;UACL,IAAI,IAAI,CAACN,OAAO,CAAC,wBAAwB,CAAC,CAACf,QAAQ,CAACkC,WAAW,CAAC,EAAE;YAChE,IAAI,CAAC1B,aAAa,CAAC6B,GAAG,CAACH,WAAW,CAAC;UACrC,CAAC,MAAM;YACL,IAAI,CAAC1B,aAAa,CAAC6B,GAAG,CAAC,IAAI,CAACnB,aAAa,CAAC;YAC1C1C,aAAa,CAAC6D,GAAG,CAAC,mBAAmB,EAAE,IAAI,CAACnB,aAAa,CAAC;UAC5D;QACF;MACF;IACF,CAAC,MAAM;MACL,IAAI,CAACA,aAAa,GAAG,IAAI,CAACD,QAAQ,CAACC,aAAa;MAChD,IAAI,CAACV,aAAa,CAAC6B,GAAG,CAAC,IAAI,CAACnB,aAAa,CAAC;IAC5C;IAEA,IAAI,CAAC,IAAI,CAACV,aAAa,CAACuB,GAAG,CAAC,CAAC,EAAE;MAC7B,IAAI,CAACvB,aAAa,CAAC6B,GAAG,CAAC,IAAI,CAACnB,aAAa,CAAC;MAC1C1C,aAAa,CAAC6D,GAAG,CAAC,mBAAmB,EAAE,IAAI,CAACnB,aAAa,CAAC;IAC5D;EACF;;EAEA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACEa,GAAGA,CAAA,EAAU;IACX,IAAIzC,GAAG;IACP,IAAI6C,IAAI;IACR,IAAIvC,YAAY;IAAC,SAAA0C,IAAA,GAAArD,SAAA,CAAAC,MAAA,EAHZqD,IAAI,OAAAC,KAAA,CAAAF,IAAA,GAAAG,KAAA,MAAAA,KAAA,GAAAH,IAAA,EAAAG,KAAA;MAAJF,IAAI,CAAAE,KAAA,IAAAxD,SAAA,CAAAwD,KAAA;IAAA;IAKT,IAAI,CAACF,IAAI,CAACrD,MAAM,IAAI,CAACqD,IAAI,CAAC,CAAC,CAAC,IAAI,OAAOA,IAAI,CAAC,CAAC,CAAC,KAAK,QAAQ,EAAE;MAC3D,OAAO,EAAE;IACX;IAEA,IAAI,CAAC,CAAC,CAAC,IAAI,CAACzB,OAAO,CAAC4B,OAAO,CAACH,IAAI,CAAC,CAAC,CAAC,CAAC,EAAE;MACpCJ,IAAI,GAAGI,IAAI,CAAC,CAAC,CAAC;MACdjD,GAAG,GAAGiD,IAAI,CAAC,CAAC,CAAC;MACb3C,YAAY,GAAG2C,IAAI,CAACI,KAAK,CAAC,CAAC,CAAC;IAC9B,CAAC,MAAM;MACLR,IAAI,GAAG,IAAI,CAAC3B,aAAa,CAACuB,GAAG,CAAC,CAAC,IAAI,IAAI,CAACb,aAAa,IAAI,IAAI;MAC7D5B,GAAG,GAAGiD,IAAI,CAAC,CAAC,CAAC;MACb3C,YAAY,GAAG2C,IAAI,CAACI,KAAK,CAAC,CAAC,CAAC;IAC9B;IAEA,IAAIR,IAAI,EAAE;MAAA,IAAAS,aAAA,EAAAC,cAAA;MACR,MAAMC,IAAI,MAAAvD,MAAA,CAAM4C,IAAI,OAAA5C,MAAA,CAAID,GAAG,CAAE;MAC7B,IAAIyD,MAAM,GAAG,CAAC,IAAI,CAAChC,OAAO,IAAI,IAAI,CAACA,OAAO,CAAC+B,IAAI,CAAC,GAAG,IAAI,CAAC/B,OAAO,CAAC+B,IAAI,CAAC,GAAG3D,SAAS,MAAM,IAAI,CAACmB,SAAS,GAAGwC,IAAI,GAAG,EAAE,CAAC;MAElH,IAAI,OAAOC,MAAM,KAAK,UAAU,EAAE;QAChCA,MAAM,GAAGA,MAAM,CAACjE,IAAI,CAAC,IAAI,CAAC;MAC5B;MAEA,IAAKiE,MAAM,KAAKD,IAAI,IAAKC,MAAM,IAAIA,MAAM,CAAC7D,MAAM,IAAIP,MAAM,CAACqE,IAAI,CAAC,EAAAJ,aAAA,GAAAhD,YAAY,cAAAgD,aAAA,wBAAAC,cAAA,GAAZD,aAAA,CAAe,CAAC,CAAC,cAAAC,cAAA,uBAAjBA,cAAA,CAAmB9C,IAAI,KAAIH,YAAY,CAAC,CAACV,MAAM,EAAE;QAC/G6D,MAAM,GAAGrD,mBAAmB,CAACqD,MAAM,EAAEnD,YAAY,CAAC;MACpD;MAEA,OAAOmD,MAAM;IACf;IAEA,OAAO,IAAI,CAACzC,SAAS,GAAGhB,GAAG,GAAG,EAAE;EAClC;;EAEA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;EACE2D,GAAGA,CAAA,EAAU;IACX,IAAI3D,GAAG;IACP,IAAI6C,IAAI;IAER,IAAI,CAAClD,SAAA,CAAKC,MAAM,IAAI,EAAAD,SAAA,CAAAC,MAAA,QAAAC,SAAA,GAAAF,SAAA,IAAQ,EAAE;MAC5B,OAAO,EAAE;IACX;IAEA,IAAI,IAAI,CAAC6B,OAAO,CAACd,QAAQ,CAAAf,SAAA,CAAAC,MAAA,QAAAC,SAAA,GAAAF,SAAA,GAAQ,CAAC,EAAE;MAClCkD,IAAI,GAAAlD,SAAA,CAAAC,MAAA,QAAAC,SAAA,GAAAF,SAAA,GAAU;MACdK,GAAG,GAAAL,SAAA,CAAAC,MAAA,QAAAC,SAAA,GAAAF,SAAA,GAAU;IACf,CAAC,MAAM;MACLkD,IAAI,GAAG,IAAI,CAAC3B,aAAa,CAACuB,GAAG,CAAC,CAAC,IAAI,IAAI,CAACb,aAAa,IAAI,IAAI;MAC7D5B,GAAG,GAAAL,SAAA,CAAAC,MAAA,QAAAC,SAAA,GAAAF,SAAA,GAAU;IACf;IAEA,IAAIkD,IAAI,EAAE;MAAA,IAAAe,aAAA;MACR5D,GAAG,MAAAC,MAAA,CAAM4C,IAAI,OAAA5C,MAAA,CAAID,GAAG,CAAE;MACtB,OAAO,CAAC,EAAE,CAAA4D,aAAA,OAAI,CAACnC,OAAO,cAAAmC,aAAA,eAAZA,aAAA,CAAe5D,GAAG,CAAC,GAAG,IAAI,CAACyB,OAAO,CAACzB,GAAG,CAAC,GAAGH,SAAS,CAAC;IAChE;IAEA,OAAO,KAAK;EACd;;EAEA;AACF;AACA;AACA;AACA;AACA;AACA;EACEgE,SAASA,CAACC,MAAM,EAAE;IAChB/E,KAAK,CAAC+E,MAAM,EAAExC,MAAM,CAAC;IAErB,IAAI,IAAI,CAACK,QAAQ,IAAI,IAAI,CAACA,QAAQ,CAACmC,MAAM,CAAC,EAAE;MAC1C,IAAI,CAAC5C,aAAa,CAAC6B,GAAG,CAACe,MAAM,CAAC;MAC9B,IAAInF,MAAM,CAACuD,QAAQ,EAAE;QACnBhD,aAAa,CAAC6D,GAAG,CAAC,mBAAmB,EAAEe,MAAM,CAAC;MAChD;IACF,CAAC,MAAM;MACL,MAAM,IAAInF,MAAM,CAACoF,KAAK,CAAC,GAAG,uBAAA9D,MAAA,CAAuB6D,MAAM,OAAI,CAAC;IAC9D;IACA,OAAO,IAAI;EACb;;EAEA;AACF;AACA;AACA;AACA;AACA;AACA;EACEnB,UAAUA,CAAC3C,GAAG,EAAE;IACdjB,KAAK,CAACiB,GAAG,EAAEhB,KAAK,CAACgF,QAAQ,CAAChF,KAAK,CAACqC,KAAK,CAAC,SAAS,EAAE,KAAK,EAAE,OAAO,EAAE,SAAS,EAAE,YAAY,EAAE,aAAa,CAAC,CAAC,CAAC;IAC1G,IAAIrB,GAAG,EAAE;MACP,OAAO,IAAI,CAACiE,UAAU,CAAC,CAAC,CAACjE,GAAG,CAAC,IAAIH,SAAS;IAC5C;IACA,OAAO,IAAI,CAACoE,UAAU,CAAC,CAAC;EAC1B;;EAEA;AACF;AACA;AACA;AACA;AACA;EACEA,UAAUA,CAAA,EAAG;IACX,IAAIjE,GAAG;IACP,MAAM8D,MAAM,GAAG,IAAI,CAAC5C,aAAa,CAACuB,GAAG,CAAC,CAAC;IACvC,OAAO;MACLyB,OAAO,EAAEJ,MAAM;MACfK,UAAU,EAAE,IAAI,CAACxC,QAAQ,CAACmC,MAAM,CAAC,CAAChB,OAAO;MACzCsB,WAAW,EAAE,IAAI,CAACzC,QAAQ,CAACmC,MAAM,CAAC,CAACO,IAAI;MACvCC,GAAG,EAAE,CAAC,MAAM;QACV,MAAMb,MAAM,GAAG,EAAE;QACjB,KAAKzD,GAAG,IAAI,IAAI,CAAC2B,QAAQ,EAAE;UACzB,IAAIxC,QAAQ,CAAC,IAAI,CAACwC,QAAQ,CAAC3B,GAAG,CAAC,CAAC,EAAE;YAChCyD,MAAM,CAACzB,IAAI,CAAC,IAAI,CAACL,QAAQ,CAAC3B,GAAG,CAAC,CAAC;UACjC;QACF;QACA,OAAOyD,MAAM;MACf,CAAC,EAAE,CAAC;MACJc,KAAK,EAAE,CAAC,MAAM;QACZ,MAAMd,MAAM,GAAG,EAAE;QACjB,KAAKzD,GAAG,IAAI,IAAI,CAAC2B,QAAQ,EAAE;UACzB,IAAIxC,QAAQ,CAAC,IAAI,CAACwC,QAAQ,CAAC3B,GAAG,CAAC,CAAC,IAAKA,GAAG,KAAK8D,MAAO,EAAE;YACpDL,MAAM,CAACzB,IAAI,CAAC,IAAI,CAACL,QAAQ,CAAC3B,GAAG,CAAC,CAAC;UACjC;QACF;QACA,OAAOyD,MAAM;MACf,CAAC,EAAE,CAAC;MACJjC,OAAO,EAAE,CAAC,MAAM;QACd,MAAMiC,MAAM,GAAG,EAAE;QACjB,KAAKzD,GAAG,IAAI,IAAI,CAAC2B,QAAQ,EAAE;UACzB,IAAIxC,QAAQ,CAAC,IAAI,CAACwC,QAAQ,CAAC3B,GAAG,CAAC,CAAC,EAAE;YAChCyD,MAAM,CAACzB,IAAI,CAAC,IAAI,CAACL,QAAQ,CAAC3B,GAAG,CAAC,CAAC+B,IAAI,CAAC;UACtC;QACF;QACA,OAAO0B,MAAM;MACf,CAAC,EAAE;IACL,CAAC;EACH;;EAEA;AACF;AACA;AACA;AACA;AACA;AACA;EACE/B,OAAOA,CAAC8C,IAAI,EAAE;IACZzF,KAAK,CAACyF,IAAI,EAAEnF,MAAM,CAAC;IAEnB,IAAIoF,CAAC;IACL,IAAIzE,GAAG;IACP,IAAI0E,MAAM;IACV,KAAK1E,GAAG,IAAIwE,IAAI,EAAE;MAChB,IAAIxE,GAAG,KAAK,UAAU,EAAE;QACtB0E,MAAM,GAAGjF,cAAc,CAACD,IAAI,CAAC,IAAI,EAAEgF,IAAI,CAACxE,GAAG,CAAC,EAAEA,GAAG,CAAC;QAClD,KAAKyE,CAAC,IAAIC,MAAM,EAAE;UAChB,IAAI,OAAOA,MAAM,CAACD,CAAC,CAAC,KAAK,QAAQ,EAAE;YACjC,IAAI,CAAChD,OAAO,CAACgD,CAAC,CAAC,GAAGC,MAAM,CAACD,CAAC,CAAC;UAC7B;QACF;MACF;IACF;EACF;AACF,C","file":"/packages/ostrio_i18n.js","sourcesContent":["import { Meteor } from 'meteor/meteor';\nimport { ReactiveVar } from 'meteor/reactive-var';\nimport { check, Match } from 'meteor/check';\nimport { ClientStorage } from 'meteor/ostrio:cstorage';\n\nconst clientStorage = new ClientStorage();\nconst isObject = (obj) => {\n  if (!obj) {\n    return false;\n  }\n\n  return Object.prototype.toString.call(obj) === '[object Object]';\n};\n\n/**\n * @private\n * @locus Anywhere\n * @name toDottedString\n * @summary Convert object nested keys into dotted string\n */\nconst toDottedString = function (obj, prepend = false) {\n  let final = {};\n  let newKey = '';\n  for (let key in obj) {\n    if (prepend) {\n      newKey = `${prepend}.${key}`;\n    } else {\n      newKey = key;\n    }\n\n    if (typeof obj[key] === 'function' || typeof obj[key] === 'string') {\n      final[newKey] = obj[key];\n    } else {\n      final = Object.assign({}, final, toDottedString.call(this, obj[key], newKey));\n    }\n  }\n  return final;\n};\n\nconst _allowedDataTypes = ['string', 'number'];\n/**\n * @private\n * @locus Anywhere\n * @name proceedPlaceholders\n * @summary Replace placeholders with replacements in l10n strings\n */\nconst proceedPlaceholders = function (_string, replacements) {\n  let string = _string;\n  if (string) {\n    let key;\n    for (let replacement of replacements) {\n      if (replacement && replacement.hash && isObject(replacement.hash)) {\n        for (key in replacement.hash) {\n          if (_allowedDataTypes.includes(typeof replacement.hash[key])) {\n            string = string.replace(new RegExp(`\\{\\{(\\s)*(${key})+(\\s)*\\}\\}`, 'ig'), replacement.hash[key]);\n          }\n        }\n      } else if (isObject(replacement)) {\n        for (key in replacement) {\n          if (_allowedDataTypes.includes(typeof replacement[key])) {\n            string = string.replace(new RegExp(`\\{\\{(\\s)*(${key})+(\\s)*\\}\\}`, 'ig'), replacement[key]);\n          }\n        }\n      } else if (_allowedDataTypes.includes(typeof replacement)) {\n        string = string.replace(/\\{\\{(\\s)*([A-z])+(\\s)*\\}\\}/i, replacement);\n      }\n    }\n  }\n\n  return string;\n};\n\nexport default class I18N {\n  /**\n   * @locus Anywhere\n   * @name I18N\n   * @constructor\n   * @summary Initialize I18N object with `config`\n   * @param config                    {Object}\n   * @param config.i18n               {Object}  - Internalization object\n   * @param config.returnKey          {Boolean} - Return key if l10n value not found\n   * @param config.helperName         {String}  - Template main i18n helper name\n   * @param config.helperSettingsName {String}  - Template i18nSettings helper name\n   */\n  constructor(config = {}) {\n    check(config, Object);\n\n    let key;\n    const self = this;\n    this.returnKey = config.returnKey || true;\n    this.helperName = config.helperName === null\n        ? null\n        : config.helperName || 'i18n';\n    this.currentLocale = new ReactiveVar(void 0);\n    this.helperSettingsName = config.helperSettingsName === null\n      ? null\n      : config.helperSettingsName || 'i18nSettings';\n\n    check(this.returnKey, Boolean);\n    check(this.helperName, Match.OneOf(String, null));\n    check(this.helperSettingsName, Match.OneOf(String, null));\n    check(config.i18n, Object);\n\n    this.locales = [];\n    this.strings = {};\n\n    this.addl10n(config.i18n);\n\n    if (isObject(config.i18n)) {\n      check(config.i18n.settings, Object);\n      this.settings = config.i18n.settings;\n      this.defaultLocale = this.settings.defaultLocale;\n      check(this.defaultLocale, String);\n      this.strings['__settings.__langSet__'] = [];\n      this.strings['__settings.__langConfig__'] = [];\n      const dotted = toDottedString.call(this, this.settings, '__settings');\n\n      for (key in dotted) {\n        if (typeof dotted[key] === 'string') {\n          this.strings[key] = dotted[key];\n        }\n      }\n\n      for (key in this.settings) {\n        if (this.settings[key]?.code) {\n          this.locales.push(key);\n          this.strings['__settings.__langSet__'].push(this.settings[key].code);\n          this.strings['__settings.__langConfig__'].push(this.settings[key]);\n        }\n      }\n    }\n\n    this.userLocale = ((Meteor.isClient) ? window.navigator.userLanguage || window.navigator.language || navigator.userLanguage : this.settings.defaultLocale);\n\n    if (Meteor.isClient) {\n      if (typeof Template !== 'undefined' && Template !== null) {\n        if (this.helperName !== null) {\n          /**\n           * @summary Main `i18n` template helper\n           */\n          Template.registerHelper(this.helperName, function () {\n            return self.get.apply(self, arguments);\n          });\n        }\n\n        if (this.helperSettingsName !== null) {\n          /**\n           * @summary Settings `i18n` template helper, might be used to build language switcher (see demo folder).\n           */\n          Template.registerHelper(this.helperSettingsName, function () {\n            return self.getSetting.apply(self, arguments);\n          });\n        }\n      }\n\n      const savedLocale = clientStorage.get('___i18n.locale___');\n      if (!this.currentLocale.get()) {\n        if (!savedLocale) {\n          for (let lang of this.strings['__settings.__langConfig__']) {\n            if (lang.code === this.userLocale || lang.isoCode === this.userLocale) {\n              this.currentLocale.set(lang.code);\n              clientStorage.set('___i18n.locale___', lang.code);\n              break;\n            }\n          }\n        } else {\n          if (this.strings['__settings.__langSet__'].includes(savedLocale)) {\n            this.currentLocale.set(savedLocale);\n          } else {\n            this.currentLocale.set(this.defaultLocale);\n            clientStorage.set('___i18n.locale___', this.defaultLocale);\n          }\n        }\n      }\n    } else {\n      this.defaultLocale = this.settings.defaultLocale;\n      this.currentLocale.set(this.defaultLocale);\n    }\n\n    if (!this.currentLocale.get()) {\n      this.currentLocale.set(this.defaultLocale);\n      clientStorage.set('___i18n.locale___', this.defaultLocale);\n    }\n  }\n\n  /**\n   * @locus Anywhere\n   * @memberOf I18N\n   * @name get\n   * @summary Get l10n value by key\n   * @param locale       {String} - [Optional] Two-letter locale string\n   * @param key          {String} - l10n key like: `folder.file.object.key`\n   * @param replacements... {String|[String]|Object} - [Optional] Replacements for placeholders in l10n string\n   */\n  get(...args) {\n    let key;\n    let lang;\n    let replacements;\n\n    if (!args.length || !args[0] || typeof args[0] !== 'string') {\n      return '';\n    }\n\n    if (!!~this.locales.indexOf(args[0])) {\n      lang = args[0];\n      key = args[1];\n      replacements = args.slice(2);\n    } else {\n      lang = this.currentLocale.get() || this.defaultLocale || 'en';\n      key = args[0];\n      replacements = args.slice(1);\n    }\n\n    if (lang) {\n      const _key = `${lang}.${key}`;\n      let result = (this.strings && this.strings[_key] ? this.strings[_key] : undefined) || (this.returnKey ? _key : '');\n\n      if (typeof result === 'function') {\n        result = result.call(this);\n      }\n\n      if ((result !== _key) && result && result.length && Object.keys(replacements?.[0]?.hash || replacements).length) {\n        result = proceedPlaceholders(result, replacements);\n      }\n\n      return result;\n    }\n\n    return this.returnKey ? key : '';\n  }\n\n  /**\n   * @locus Anywhere\n   * @memberOf I18N\n   * @name has\n   * @summary Check if key exists in current locale\n   * @param locale       {String} - [Optional] Two-letter locale string\n   * @param key          {String} - l10n key like: `folder.file.object.key`\n   */\n  has(...args) {\n    let key;\n    let lang;\n\n    if (!args.length || !args[0]) {\n      return '';\n    }\n\n    if (this.locales.includes(args[0])) {\n      lang = args[0];\n      key = args[1];\n    } else {\n      lang = this.currentLocale.get() || this.defaultLocale || 'en';\n      key = args[0];\n    }\n\n    if (lang) {\n      key = `${lang}.${key}`;\n      return !!(this.strings?.[key] ? this.strings[key] : undefined);\n    }\n\n    return false;\n  }\n\n  /**\n   * @locus Anywhere\n   * @memberOf I18N\n   * @name setLocale\n   * @summary Set another locale\n   * @param locale {String} - Two-letter locale string\n   */\n  setLocale(locale) {\n    check(locale, String);\n\n    if (this.settings && this.settings[locale]) {\n      this.currentLocale.set(locale);\n      if (Meteor.isClient) {\n        clientStorage.set('___i18n.locale___', locale);\n      }\n    } else {\n      throw new Meteor.Error(404, `No such locale: \\\"${locale}\\\"`);\n    }\n    return this;\n  }\n\n  /**\n   * @locus Anywhere\n   * @memberOf I18N\n   * @name getSetting\n   * @summary Get parsed data by key from i18n.json file\n   * @param key {String} - One of the keys: 'current', 'all', 'other', 'locales'\n   */\n  getSetting(key) {\n    check(key, Match.Optional(Match.OneOf('current', 'all', 'other', 'locales', 'currentISO', 'currentName')));\n    if (key) {\n      return this.langugeSet()[key] || undefined;\n    }\n    return this.langugeSet();\n  }\n\n  /**\n   * @locus Anywhere\n   * @memberOf I18N\n   * @name langugeSet\n   * @summary Get data from i18n config\n   */\n  langugeSet() {\n    let key;\n    const locale = this.currentLocale.get();\n    return {\n      current: locale,\n      currentISO: this.settings[locale].isoCode,\n      currentName: this.settings[locale].name,\n      all: (() => {\n        const result = [];\n        for (key in this.settings) {\n          if (isObject(this.settings[key])) {\n            result.push(this.settings[key]);\n          }\n        }\n        return result;\n      })(),\n      other: (() => {\n        const result = [];\n        for (key in this.settings) {\n          if (isObject(this.settings[key]) && (key !== locale)) {\n            result.push(this.settings[key]);\n          }\n        }\n        return result;\n      })(),\n      locales: (() => {\n        const result = [];\n        for (key in this.settings) {\n          if (isObject(this.settings[key])) {\n            result.push(this.settings[key].code);\n          }\n        }\n        return result;\n      })()\n    };\n  }\n\n  /**\n   * @locus Anywhere\n   * @memberOf I18N\n   * @name addl10n\n   * @summary add l10n data\n   * @example { en: { newKey: \"new data\" } }\n   */\n  addl10n(l10n) {\n    check(l10n, Object);\n\n    let k;\n    let key;\n    let object;\n    for (key in l10n) {\n      if (key !== 'settings') {\n        object = toDottedString.call(this, l10n[key], key);\n        for (k in object) {\n          if (typeof object[k] === 'string') {\n            this.strings[k] = object[k];\n          }\n        }\n      }\n    }\n  }\n}\n"]}