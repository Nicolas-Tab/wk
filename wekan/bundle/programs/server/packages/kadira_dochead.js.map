{"version":3,"sources":["meteor://ðŸ’»app/packages/kadira:dochead/lib/both.js"],"names":["FlowRouter","Package","Meteor","isClient","titleDependency","Tracker","Dependency","DocHead","currentTitle","setTitle","title","changed","document","titleHtml","concat","_addToHead","addMeta","info","_addTag","addLink","getTitle","depend","addLdJsonScript","jsonObj","strObj","JSON","stringify","_addLdJsonScript","loadScript","url","options","callback","npmLoadScript","tag","meta","_buildTag","getElementsByTagName","insertAdjacentHTML","html","ssrContext","get","addToHead","metaInfo","type","props","key","stringifiedObject","scriptTag","removeDocHeadAddedTags","elements","querySelectorAll","element","parentNode","removeChild"],"mappings":"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","file":"/packages/kadira_dochead.js","sourcesContent":["var FlowRouter = null;\nif (Package['kadira:flow-router-ssr']) {\n  FlowRouter = Package['kadira:flow-router-ssr'].FlowRouter;\n}\n\nif (Meteor.isClient) {\n  var titleDependency = new Tracker.Dependency();\n}\n\nDocHead = {\n  currentTitle: null,\n  setTitle(title) {\n    if (Meteor.isClient) {\n      titleDependency.changed();\n      document.title = title;\n    } else {\n      this.currentTitle = title;\n      const titleHtml = `<title>${title}</title>`;\n      this._addToHead(titleHtml);\n    }\n  },\n  addMeta(info) {\n    this._addTag(info, 'meta');\n  },\n  addLink(info) {\n    this._addTag(info, 'link');\n  },\n  getTitle() {\n    if (Meteor.isClient) {\n      titleDependency.depend();\n      return document.title;\n    }\n    return this.currentTitle;\n  },\n  addLdJsonScript(jsonObj) {\n    const strObj = JSON.stringify(jsonObj);\n    this._addLdJsonScript(strObj);\n  },\n  loadScript(url, options, callback) {\n    if (Meteor.isClient) {\n      npmLoadScript(url, options, callback);\n    }\n  },\n  _addTag(info, tag) {\n    const meta = this._buildTag(info, tag);\n    if (Meteor.isClient) {\n      document.getElementsByTagName('head')[0].insertAdjacentHTML('beforeend', meta);\n    } else {\n      this._addToHead(meta);\n    }\n  },\n  _addToHead(html) {\n    // only work there is kadira:flow-router-ssr\n    if (!FlowRouter) {\n      return;\n    }\n    let ssrContext = FlowRouter.ssrContext.get();\n    if (ssrContext) {\n      ssrContext.addToHead(html);\n    }\n  },\n  _buildTag(metaInfo, type) {\n    let props = \"\";\n    for (let key in metaInfo) {\n      props += `${key}=\"${metaInfo[key]}\" `;\n    }\n    props += 'dochead=\"1\"';\n    var meta = `<${type} ${props}/>`;\n    return meta;\n  },\n  _addLdJsonScript(stringifiedObject) {\n    const scriptTag = `<script type=\"application/ld+json\" dochead=\"1\">${stringifiedObject}</script>`;\n    if (Meteor.isClient) {\n      document.getElementsByTagName('head')[0].insertAdjacentHTML('beforeend', scriptTag);\n    } else {\n      this._addToHead(scriptTag);\n    }\n  },\n  removeDocHeadAddedTags() {\n    if (Meteor.isClient) {\n      const elements = document.querySelectorAll('[dochead=\"1\"]');\n      // We use for-of here to loop only over iterable objects\n      for (let element of elements) {\n        element.parentNode.removeChild(element);\n      }\n    }\n  }\n};\n"]}